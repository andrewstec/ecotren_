
@{
    ViewBag.Title = "Welcome";
    Layout = "~/Views/Shared/_SupplierLayout.cshtml";
}

<div class="background"></div>
<div class="form">
    <div class="formContent">
        <h2>Submit a Flyer</h2>
        <hr id="hrOne" />
        @using (Html.BeginForm("Index", "Supplier", FormMethod.Post, new { @class = "form-horizontal col-md-12", @data_parsley_validate = "" }))
        {
            <div class="form-group">
                <label class="control-label col-md-2">Subject<span class="asterisk">*</span></label>
                <div class="col-md-8">
                    <input type="text" class="form-control" name="subject" required data-parsley-errors-messages-disabled />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Description<span class="asterisk">*</span></label>
                <div class="col-md-8">
                    <textarea class="form-control" name="body" required data-parsley-errors-messages-disabled></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Attachment</label>
                <div class="col-md-8">
                    <input type="file" />
                    <p class="help-block">Not implemented</p>
                </div>
            </div>

            <hr id="hrTwo" />
            <div class="form-group">
                <div class="col-md-8 col-md-offset-2">
                    <input type="submit" id="sendBtn" class="btn btn-block btn-lg" value="SEND" />
                </div>
            </div>
        }
    </div>
</div>
<div class="formBackground"></div>
@Html.ActionLink("Log out", "Logout", "Account", null, new { id = "logoutBtn" })


<!-- Modal -->
<div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <strong>Success!</strong>
            </div>
            <div class="modal-body bg-success">
                <p>Your submission has been sent! <span class="fa fa-smile-o fa-fw"></span></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <strong>Error!</strong>
            </div>
            <div class="modal-body bg-danger">
                <p>Oh no... Something went wrong. Try again! <span class="fa fa-frown-o fa-fw"></span></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
@{ 
    if (ViewBag.Success != null)
    {
        <div id="success"></div>
    }
    else if (ViewBag.Error != null)
    {
        <div id="error"></div>
    }
}

@section script{
    <script>
        if(document.getElementById("success")){
            $("#successModal").modal("show");
        }
        if(document.getElementById("error")){
            $("#errorModal").modal("show");
        }
    </script>
}